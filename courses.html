<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course Catalog</title>

  <!-- Firebase Compatibility Scripts -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
/>
<script src="https://cdn.tailwindcss.com"></script>
<script type="module" src="./dynamiccon.js"></script>
<script type="module" src="./navbar.js"></script>
<script src="bottomnv.js"></script>
<script src="kaka.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
/>
  <script>
    tailwind.config = {
        theme: {
            extend: {}
        },
        plugins: [
            function ({ addUtilities }) {
                addUtilities({
                    '.scrollbar-hide': {
                        '-ms-overflow-style': 'none', /* Hide scrollbar for IE and Edge */
                        'scrollbar-width': 'none', /* Hide scrollbar for Firefox */
                    },
                    '.scrollbar-hide::-webkit-scrollbar': {
                        display: 'none' /* Hide scrollbar for Chrome, Safari */
                    }
                })
            }
        ]
    };
</script>

<style>
  @keyframes scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }
  
  .scrolling {
    animation: scroll 10s linear infinite;
  }
</style>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    select {
  background-color: transparent;
  color: inherit;



}



/* Remove background color from options */
option {
  background-color: transparent !important;
  color: black; /* Adjust text color as needed */
}



 
  
  </style>
</head>
<script src="dark-mode.js"></script>
<body class=" flex flex-col justify-center items-center   bg-gray-900 text-white">

    <div class=" bg-[#172554] sticky top-0 z-20 w-full border-b ">
       
        <div id="navbar-container"></div></div>

<!-- Modal Section -->
<div id="course-modal" class=" hidden max-w-6xl m-2 ">
  <p id="modal1-id" style="display: none;" ></p>
  <!-- <p id="modal-id" style="display: none;"></p> -->
  <div class="relative modal-content bg-white p-0    rounded-lg  cursor-pointer  bg-gray-900 scrollbar-hide  ">
    <!-- Close Button -->
   
   <button id="close-modal" class="absolute top-4 right-4 mb-4 text-center w-14 h-14 bg-gray-500/30 p-3 rounded-full text-2xl text-gray-500 hover:text-white hover:bg-red-600 transition-all">&times;</button>
      
  <!-- Course Image -->
       <!-- Course Image -->
       <div class="relative h-96 overflow-hidden">
        <img id="modal-image" src="" alt="Course Image" class="object-cover w-full h-full" />
        <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/50 to-transparent"></div>
        <div class="absolute bottom-0 left-0 right-0 p-6">
            <h2 id="modal-title" class="text-4xl font-bold text-white"></h2>
            <div class="flex items-center gap-4 mt-4">
               <!-- Rating -->
  <p class="text-gray-300 text-sm flex items-center gap-2 mb-3 transition-all duration-500 ease-out hover:translate-x-1">
    
    
    <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-yellow-500 transition-transform duration-300 hover:scale-125" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.318l1.946 3.946 4.355.634-3.15 3.068.744 4.34L12 14.8l-3.895 2.065.744-4.34-3.15-3.068 4.355-.634L12 4.318z" />
    </svg> 
  </p>
  <p id="model-ratings">0 ratings</p>
                <span class="text-gray-300">|</span>
                <span class="text-gray-300" id="model-students">0 students</span>
                <span class="text-gray-300">|</span>
                <span class="text-gray-300" id="modal-language">English</span>
            </div>
        </div>
    </div>
        <!-- Social Share Buttons -->
       <!-- Share Section -->
       <div class="bg-gray-800 rounded-xl p-6">
        <h3 class="text-lg font-semibold text-white mb-4">Share This Course</h3>
        <div class="flex gap-4">
            <a id="share-facebook" class="p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300" target="_blank">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/>
                </svg>
            </a>
            <a id="share-twitter" class="p-3 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors duration-300" target="_blank">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/>
                </svg>
            </a>
            <a id="share-linkedin" class="p-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors duration-300" target="_blank">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
            </a>
            <a id="share-whatsapp" class="p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors duration-300" target="_blank">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.339 1.872.339.346 0 .665-.03.973-.089.297-.06.584-.15.833-.257.173-.099.397-.347.446-.446.05-.099.05-.198-.025-.297-.075-.099-.446-1.108-.614-1.518-.173-.41-.347-.347-.446-.347-.099 0-.198.05-.297.248-.099.198-.388.52-.533.684-.149.173-.297.26-.446.26-.149 0-.272-.075-.446-.223-.173-.149-.654-.61-1.24-1.95-.52-1.11-.87-1.86-1.04-2.12-.173-.248-.015-.384.111-.509.108-.108.223-.223.322-.347.099-.124.132-.211.198-.347.066-.136.033-.26-.016-.347-.05-.083-.446-1.075-.612-1.472-.16-.388-.323-.335-.446-.34-.115-.004-.247-.006-.38-.006zM12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22c-5.514 0-10-4.486-10-10S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"/>
                </svg>
  </a>
</div>
    </div>
    
    







    

<!-- Left Side and Right Side Info -->
<div class="flex justify-center md:space-x-6 lg:space-x-10 flex-col-reverse md:flex-row lg:flex-row ">
  <!-- Preview And Descriptions -->
  <div class="max-w-lg gap-6 mt-4 p-6 rounded-lg bg-gray-800/50 border border-gray-700 backdrop-blur-sm">

    <!-- Video URL -->
    <div class="bg-gray-800 rounded-xl overflow-hidden">
      <div class="p-4 border-b border-gray-700">
          <h3 class="text-lg font-semibold text-white flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              Course Preview
          </h3>
      </div>
      <div class="aspect-w-16 aspect-h-9">
          <iframe id="modal-video" class="w-full h-64 rounded-b-xl" allow="autoplay; encrypted-media; fullscreen; picture-in-picture" allowfullscreen style="display: none;"></iframe>
          <video id="modal-video-player" class="w-full h-64 rounded-b-xl" controls style="display: none;">Your browser does not support the video tag.</video>
      </div>
    </div>
    
    
    
    <!-- Description Section -->
    <section class="mb-6 mt-4">
      <div class="flex items-center gap-3 mb-4">
        <div class="w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-white">About This Course</h3>
      </div>

      <div class=" ">
        <div class="flex items-start gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-amber-500 mt-1 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div id="modal-description" class="text-gray-300 space-y-4 leading-relaxed"></div>
        </div>
      </div>
    </section>

  </div>

<!-- Course Data -->
<div class="max-w-lg mt-4">
  <!-- price and enroll -->
  <div
    class="flex flex-row sm:flex-row items-center justify-between gap-6 mb-6 p-6 rounded-lg bg-gray-800/50 border border-gray-700 backdrop-blur-sm"
  >
    <!-- Price Section -->
    <span id="modal-price" class="text-3xl font-bold text-white"></span>

    <!-- Enroll Button -->

    <button id="modal-enroll-button" class="flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-300">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
      </svg>
      Enroll Now
    </button>
  </div>



  <!-- Course Information Section -->
  <section
    class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6 p-6 rounded-lg bg-gray-800/50 border border-gray-700 backdrop-blur-sm"
  >
    <!-- Created By -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Created by</p>
        <p id="modal-id" style="display: none"></p>
        <p id="modal-author" class="text-blue-400 font-semibold hover:text-blue-300 transition-colors cursor-pointer"></p>
      </div>
    </div>

    <!-- Created At -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Created at</p>
        <span id="modal-created" class="text-white font-medium"></span>
      </div>
    </div>

      <!-- Languages -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Language(s)</p>
        <span id="modal-language" class="text-white font-medium"></span>
      </div>
  </div>

  <!-- Duration -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Duration</p>
        <span id="modal-duration" class="text-white font-medium"></span>
      </div>
  </div>

    <!-- Updated At -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
      </div>
  <div>
        <p class="text-sm font-medium text-gray-400">Last updated</p>
        <p id="modal-updated" class="text-white font-medium"></p>
      </div>
    </div>

    <!-- Students -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-indigo-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Students</p>
        <span id="model-students1" class="text-white font-medium">0 students</span>
  </div>
  </div>

    <!-- Ratings -->
    <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-xl hover:bg-gray-900/70 transition-all duration-300">
      <div class="w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
        </svg>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-400">Ratings</p>
        <span id="model-ratings" class="text-white font-medium">0 ratings</span>
      </div>
    </div>
  </section>

  <!-- Category Section -->
  <section class="mb-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
        </svg>
  </div>
      <h3 class="text-lg font-semibold text-white">Category</h3>
  </div>
    
    <div class="flex flex-wrap gap-3 p-4 bg-gray-800/50 rounded-xl border border-gray-700 backdrop-blur-sm">
      <div id="modal-category" class="px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg flex items-center gap-2 transition-all duration-300 hover:bg-blue-500/30">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
        </svg>
        <span class="font-medium"></span>
  </div>
    </div>
  </section>

  <!-- Tags Section -->
  <section class="mb-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-white">Tags</h3>
    </div>
    
    <div class="flex flex-wrap gap-3 p-4 bg-gray-800/50 rounded-xl border border-gray-700 backdrop-blur-sm">
      <div id="modal-tags" class="flex flex-wrap gap-2">
      <!-- Tags will be dynamically inserted here -->
    </div>
  </div>
  </section>




  <!-- Summary Section -->
  <section class="mb-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-white">Summary</h3>
  </div>

    <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 backdrop-blur-sm">
      <div class="flex items-start gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500 mt-1 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <p id="modal-summary" class="text-gray-300 leading-relaxed"></p>
      </div>
    </div>
  </section>

  <!-- Requirements Section -->
  <section class="mb-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-white">Requirements</h3>
    </div>

    <details class="group">
      <summary class="flex items-center justify-between p-4 bg-gray-800/50 text-white rounded-xl border border-gray-700 backdrop-blur-sm hover:bg-gray-800/70 transition-all duration-300 cursor-pointer">
        <div class="flex items-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span class="font-medium">View Requirements</span>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400 transform transition-transform duration-300 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>
      <div class="mt-2 p-6 bg-gray-800/50 rounded-xl border border-gray-700 backdrop-blur-sm">
        <ul id="modal-requirements" class="space-y-3 text-gray-300">
          <!-- Requirements will be dynamically inserted here -->
        </ul>
  </div>
    </details>
  </section>


  <!-- Learnings Section -->
  <section class="mb-6">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-white">What You'll Learn</h3>
    </div>

    <details class="group">
      <summary class="flex items-center justify-between p-4 bg-gray-800/50 text-white rounded-xl border border-gray-700 backdrop-blur-sm hover:bg-gray-800/70 transition-all duration-300 cursor-pointer">
        <div class="flex items-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="font-medium">View Learning Outcomes</span>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400 transform transition-transform duration-300 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>
      <div class="mt-2 p-6 bg-gray-800/50 rounded-xl border border-gray-700 backdrop-blur-sm">
        <ul id="modal-learnings" class="space-y-3 text-gray-300">
          <!-- Learnings will be dynamically inserted here -->
        </ul>
  </div>
    </details>
  </section>
  


</div>




</div>




  
</div>
  </div>
</div>

        <div id="loadingScreen" class="fixed inset-0  flex items-center justify-center z-50">
          <div class="loader border-t-4 border-blue-500 border-solid rounded-full w-16 h-16 animate-spin"></div>
        </div>
        <footer>
          <div
            class="fixed z-50 bottom-0 right-0 left-0"
            id="navbar-container1"
          ></div>
        </footer>
        
    
  <!-- Page Container -->
  
  <div class="container mx-auto mt-3 px-4 lg:px-16 flex flex-col lg:flex-row gap-6">
    <!-- Mobile Drawer for Tags -->
    

 
<div>
  
<!-- Search and Filter -->
<div class="w-full flex justify-center mt-5">
  <h1 id="lolo" class="text-3xl font-bold text</div>-white">All Courses</h1>
</div>
<div class="flex flex-row  justify-between">
 

   
 <div class="flex flex-row justify-between mt-4 w-full space-x-2 overflow-x-auto scrollbar-hide ">



  <!-- Shopping Cart Section-->
<section id="cart-container" class="fixed z-50 bottom-20 right-5 bg-gray-900 shadow-lg border border-gray-700 rounded-lg w-80 p-4 hidden transform transition-all duration-300 scale-95 opacity-0">
  <div class="flex justify-between items-center border-b border-gray-700 pb-3">
    <h2 class="text-lg font-semibold text-white flex items-center gap-2">
      <i class="fas fa-shopping-cart text-blue-500"></i>
      Shopping Cart
    </h2>
    <button id="close-cart" class="text-gray-400 hover:text-red-500 transition-colors">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div id="cart-items" class="mt-4 space-y-2 max-h-60 overflow-y-auto scrollbar-hide">
    <p class="text-gray-400 text-sm">Your cart is empty.</p>
  </div>

  <div class="mt-4 border-t border-gray-700 pt-3">
    <div class="flex justify-between items-center mb-3">
      <p class="text-gray-400">Total:</p>
      <p class="text-xl font-bold text-green-400" id="cart-total">₵0.00</p>
    </div>
    <button id="checkout-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
      <i class="fas fa-lock"></i>
      Secure Checkout
    </button>
  </div>
</section>
  <!-- Cart Icon -->
<button id="open-cart" class="fixed bottom-5 z-50 mb-20 right-5 bg-blue-500 hover:bg-blue-600 w-14 h-14 text-white p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 flex items-center justify-center">
  <i class="fas fa-shopping-cart text-xl"></i>
  <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-6 h-6 flex items-center justify-center rounded-full font-bold animate-pulse hidden">0</span>
</button>
 </div>
</div>
<div class="group relative">
  <!-- Search Container -->
  <div class="items-center border border-gray-700 p-4 rounded-lg mt-4 flex bg-gray-800/50 backdrop-blur-sm hover:border-blue-500/50 transition-all duration-300 focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500/20 shadow-lg">
    
    <!-- Animated Search Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-5 w-5 text-gray-500 transform transition-transform group-hover:scale-110 group-hover:rotate-12 group-hover:text-blue-400" 
         viewBox="0 0 20 20" 
         fill="currentColor">
      <path fill-rule="evenodd" 
            d="M8 2a6 6 0 104.472 10.472l3.9 3.9a1 1 0 001.415-1.415l-3.9-3.9A6 6 0 008 2zM3 8a5 5 0 1110 0A5 5 0 013 8z" 
            clip-rule="evenodd"/>
    </svg>

    <!-- Enhanced Search Input -->
    <input
      type="text" 
      id="searchInput"
      placeholder="Search courses..."
      class="outline-none bg-transparent ml-3 w-full text-white placeholder-gray-400 font-medium tracking-wide transition-all duration-300
             focus:placeholder-blue-400"
      autocomplete="off"
      spellcheck="false"
    />

    <!-- Live Search Indicator -->
    <div class="flex items-center gap-2 text-xs text-gray-400">
      <div class="typing-indicator hidden">
        <span class="dot animate-pulse">•</span>
        <span class="dot animate-pulse delay-100">•</span>
        <span class="dot animate-pulse delay-200">•</span>
      </div>
    </div>
  </div>

  <!-- Quick Search Tags -->
  <div class="absolute top-full left-0 right-0 mt-2 p-2 bg-gray-800 rounded-lg border border-gray-700 shadow-xl z-10 hidden group-focus-within:block animate-fade-in">
    <div class="flex flex-wrap gap-2">
      <button class="px-3 py-1 text-sm bg-blue-500/20 text-blue-400 rounded-full hover:bg-blue-500/30 transition-colors">
        Popular
      </button>
      <button class="px-3 py-1 text-sm bg-green-500/20 text-green-400 rounded-full hover:bg-green-500/30 transition-colors">
        Free Courses
      </button>
      <button class="px-3 py-1 text-sm bg-purple-500/20 text-purple-400 rounded-full hover:bg-purple-500/30 transition-colors">
        New
      </button>
    </div>
  </div>
</div>

<style>
@keyframes fade-in {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

.typing-indicator .dot {
  display: inline-block;
  width: 4px;
  height: 4px;
  border-radius: 50%;
}

.delay-100 {
  animation-delay: 100ms;
}

.delay-200 {
  animation-delay: 200ms;
}
</style>

<script>
// Show typing indicator while searching
const searchInput = document.querySelector('#searchInput');
const typingIndicator = document.querySelector('.typing-indicator');
let searchTimeout;

searchInput.addEventListener('input', () => {
  typingIndicator.classList.remove('hidden');
  clearTimeout(searchTimeout);
  
  searchTimeout = setTimeout(() => {
    typingIndicator.classList.add('hidden');
  }, 1000);
});
</script>

    <!-- Filters -->
    <div class="filter-section mb-6">
      <!-- Filter Title -->
      <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2"></h2>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"></svg>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414v6.586a1 1 0 01-1.414.914l-3-1.5a1 1 0 01-.586-.914v-5.086l-6.414-6.414a1 1 0 01-.293-.707v-2.586z" />
        </svg>
      
      </h2>

      <!-- Filter Container -->
      <div class="filter-container relative overflow-hidden">
        <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-gray-800/90 to-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-700/50 shadow-lg transform hover:shadow-blue-500/10 transition-all duration-300">
          <!-- All Filter -->
          <label class="filter-option group relative">
            <input type="checkbox" id="all-filter" class="peer hidden">
            <div class="flex items-center gap-3 px-4 py-2 bg-gray-800 rounded-lg cursor-pointer 
                   transition-all duration-300 hover:bg-gray-700
                   peer-checked:bg-blue-500 peer-checked:shadow-lg peer-checked:shadow-blue-500/20">
              <div class="w-5 h-5 flex items-center justify-center border-2 border-gray-500 rounded 
                    group-hover:border-blue-400 peer-checked:border-white peer-checked:bg-transparent
                    transition-all duration-300">
                <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform duration-300" 
                   fill="currentColor" viewBox="0 0 12 12">
                  <path d="M3.72 6.95L2.28 5.51l-.88.88L3.72 8.71l6.36-6.36-.88-.88z"/>
                </svg>
              </div>
              <span class="text-gray-300 font-medium group-hover:text-white transition-colors duration-300">All</span>
            </div>
          </label>

          <!-- Free Filter -->
          <label class="filter-option group relative">
            <input type="checkbox" id="free-filter" value="free" class="peer hidden">
            <div class="flex items-center gap-3 px-4 py-2 bg-gray-800 rounded-lg cursor-pointer
                   transition-all duration-300 hover:bg-gray-700
                   peer-checked:bg-green-500 peer-checked:shadow-lg peer-checked:shadow-green-500/20">
              <div class="w-5 h-5 flex items-center justify-center border-2 border-gray-500 rounded
                    group-hover:border-green-400 peer-checked:border-white peer-checked:bg-transparent
                    transition-all duration-300">
                <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform duration-300" 
                   fill="currentColor" viewBox="0 0 12 12">
                  <path d="M3.72 6.95L2.28 5.51l-.88.88L3.72 8.71l6.36-6.36-.88-.88z"/>
                </svg>
              </div>
              <span class="text-gray-300 font-medium group-hover:text-white transition-colors duration-300">Free</span>
            </div>
          </label>

          <!-- Paid Filter -->
          <label class="filter-option group relative">
            <input type="checkbox" id="paid-filter" value="paid" class="peer hidden">
            <div class="flex items-center gap-3 px-4 py-2 bg-gray-800 rounded-lg cursor-pointer
                   transition-all duration-300 hover:bg-gray-700
                   peer-checked:bg-purple-500 peer-checked:shadow-lg peer-checked:shadow-purple-500/20">
              <div class="w-5 h-5 flex items-center justify-center border-2 border-gray-500 rounded
                    group-hover:border-purple-400 peer-checked:border-white peer-checked:bg-transparent
                    transition-all duration-300">
                <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform duration-300" 
                   fill="currentColor" viewBox="0 0 12 12">
                  <path d="M3.72 6.95L2.28 5.51l-.88.88L3.72 8.71l6.36-6.36-.88-.88z"/>
                </svg>
              </div>
              <span class="text-gray-300 font-medium group-hover:text-white transition-colors duration-300">Paid</span>
            </div>
          </label>
        </div>
      </div>
    </div>
 
<!-- Categories -->
<h1  class="text-3xl mb-4 font-bold text-white">Categories</h1>
  <div class="w-full flex flex-row justify-center relative overflow-hidden rounded-xl">
    <!-- Gradient Overlays -->
    <div class="absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-gray-900 via-gray-900/80 to-transparent z-10 pointer-events-none"></div>
    <div class="absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-gray-900 via-gray-900/80 to-transparent z-10 pointer-events-none"></div>

    <!-- Navigation Arrows -->
    <button class="absolute left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-blue-500/80 hover:bg-blue-600 text-white rounded-full backdrop-blur-sm transition-all duration-300 shadow-lg hover:scale-110" id="scrollLeft">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    
    <button class="absolute right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-blue-500/80 hover:bg-blue-600 text-white rounded-full backdrop-blur-sm transition-all duration-300 shadow-lg hover:scale-110" id="scrollRight">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>

    <!-- Main Carousel Container -->
    <div class="relative max-w-7xl overflow-x-auto py-4 px-2 scrollbar-hide" id="scrollContainer">
      <div class="flex flex-row space-x-6 transition-transform duration-500 ease-out" id="categories">
        <!-- Categories will be added here dynamically -->
      </div>
    </div>
  </div>

  <script>
  // Smooth scroll controls
  document.getElementById('scrollLeft').addEventListener('click', () => {
    const container = document.getElementById('scrollContainer');
    container.scrollBy({ left: -300, behavior: 'smooth' });
  });

  document.getElementById('scrollRight').addEventListener('click', () => {
    const container = document.getElementById('scrollContainer');
    container.scrollBy({ left: 300, behavior: 'smooth' });
  });

  // Hover pause functionality
  const container = document.getElementById('scrollContainer');
  const categories = document.getElementById('categories');

  container.addEventListener('mouseenter', () => {
    categories.style.animationPlayState = 'paused';
  });

  container.addEventListener('mouseleave', () => {
    categories.style.animationPlayState = 'running';
  });

  // Add touch scroll momentum
  let isDown = false;
  let startX;
  let scrollLeft;

  container.addEventListener('mousedown', (e) => {
    isDown = true;
    container.style.cursor = 'grabbing';
    startX = e.pageX - container.offsetLeft;
    scrollLeft = container.scrollLeft;
  });

  container.addEventListener('mouseleave', () => {
    isDown = false;
    container.style.cursor = 'grab';
  });

  container.addEventListener('mouseup', () => {
    isDown = false;
    container.style.cursor = 'grab';
  });

  container.addEventListener('mousemove', (e) => {
    if (!isDown) return;
    e.preventDefault();
    const x = e.pageX - container.offsetLeft;
    const walk = (x - startX) * 2;
    container.scrollLeft = scrollLeft - walk;
  });
  </script>

  <style>
  @keyframes floatAnimation {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  #categories > div {
    animation: floatAnimation 3s ease-in-out infinite;
    animation-delay: calc(var(--animation-order) * 0.1s);
  }

  #categories > div:hover {
    animation-play-state: paused;
  }
  </style>
  
     
 
 <!-- Main Content -->
 <div class="flex-1">
     <!-- Page Title -->
     <div class="mb-8 text-center">
  
     </div>
     
     <!-- Courses Grid -->
     <div id="course-list" class="mb-44 grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
         <!-- Courses will be dynamically injected here -->
     </div>
 </div>
  </div>
</div>
</div>
<!-- Big Screen Footer -->
<div class="w-full" id="footer-container"></div>
<script src="footerp.js"></script>


  </div>

  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const container = document.getElementById("scrollContainer");
    const categories = document.getElementById("categories");

    // Duplicate items for seamless scroll
    categories.innerHTML += categories.innerHTML;

    // Auto-scroll behavior
    function startAutoScroll() {
      categories.classList.add("scrolling");
    }

    function stopAutoScroll() {
      categories.classList.remove("scrolling");
    }

    // Start auto-scroll
    startAutoScroll();

    // Pause auto-scroll when manually scrolling
    container.addEventListener("mouseenter", stopAutoScroll);
    container.addEventListener("mouseleave", startAutoScroll);
  });
    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCtaftgrL4p4wqNC2w211mUi8amkjw2kzM",
      authDomain: "profstudymate-6d0fc.firebaseapp.com",
      projectId: "profstudymate",
      storageBucket: "profstudymate.appspot.com",
      messagingSenderId: "141453158869",
      appId: "1:141453158869:web:d4ded426a90e9937e2f55c",
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);

    // Get Firestore and Authentication instances
    const db = firebase.firestore(app);
    const auth = firebase.auth(app);

    // Convert Firestore Timestamp to Human-Readable Date

    const urlParams = new URLSearchParams(window.location.search);
const courseTitle = urlParams.get("title1");
const course_id = urlParams.get('courseid');


    // Convert Firestore Timestamp to Human-Readable Date
    async function fetchCategories() {
            const querySnapshot = await db.collection("categories").orderBy("index").get();
            let categoriesHtml = "";
            querySnapshot.forEach((doc) => {
                const { name, image_url } = doc.data();
                categoriesHtml += `
      
  
    <div class="relative min-w-max bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white shadow-xl rounded-lg p-5 flex items-center gap-5 cursor-pointer transition-transform transform hover:scale-110 hover:shadow-2xl"
      onclick="window.location.href='courses.html?title1=${encodeURIComponent(name)}'">
      <img src="${image_url}" alt="${name}" class="w-24 h-24 object-cover rounded-full border-4 border-white shadow-md">
      <div class="flex flex-col">
      <h3 class="text-xl font-bold">${name}</h3>
      <div class="flex items-center gap-2 mt-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.318l1.946 3.946 4.355.634-3.15 3.068.744 4.34L12 14.8l-3.895 2.065.744-4.34-3.15-3.068 4.355-.634L12 4.318z" />
        </svg>
        <span class="text-sm font-medium">Popular</span>
      </div>
      </div>
    </div>
    </div>

                `;
            });
            document.getElementById("categories").innerHTML = categoriesHtml;
        }

        document.addEventListener("DOMContentLoaded", fetchCategories);

document.addEventListener("DOMContentLoaded", function () {
 if(course_id){
  showCourseDetails(course_id)
 }
});








    const formatTimestamp = (timestamp) => {
      if (!timestamp) return "Unknown";
      const date = new Date(timestamp.seconds * 1000);
      return date.toLocaleDateString(undefined, { year: "numeric", month: "long", day: "numeric" });
    };

    function renderArrayAsList(array, elementId) {
    const container = document.getElementById(elementId);
    
    if (!container) {
        console.error(`Element with ID "${elementId}" not found.`);
        return;
    }

    container.innerHTML = ""; // Clear previous content

    if (!Array.isArray(array) || array.length === 0) {
        container.innerHTML = "<p>No learnings available.</p>";
        return;
    }

    const ul = document.createElement("ul");
    ul.style.listStyleType = "disc"; // Bullet points

    array.forEach(item => {
        const li = document.createElement("li");
        li.textContent = item; // Assuming `item` is a string
        ul.appendChild(li);
    });

    container.appendChild(ul);
}


    // Fetch Courses from Firestore
    const fetchCourses = async (tagId = null) => {
    try {
        const coursesRef = db.collection("courses");
        let query = coursesRef;

        if (tagId) {
            query = coursesRef.where('tag_ids', 'array-contains', tagId);
        }

        const courseSnapshot = await query.get();
        const courses = await Promise.all(courseSnapshot.docs.map(async (doc) => {
            let courseData = { id: doc.id, ...doc.data() };
   // Skip courses with status "draft"
   if (courseData.status === "draft") {
                return null;
            }
            // Fetch category details
            if (courseData.cat_id) {
                const cateRef = db.collection("categories").doc(courseData.cat_id);
                const cateDoc = await cateRef.get();
                if (cateDoc.exists) {
                    courseData.categoryName = cateDoc.data().name || "Unknown";
                }
            }

            return courseData;
        }));

             // Filter out null values (draft courses)
             return courses.filter(course => course !== null);
        
    } catch (error) {
        console.error("Error fetching courses:", error);
        return [];
    } finally{
      if (courseTitle) {
    document.getElementById("lolo").textContent = courseTitle;
    const searchInput = document.getElementById("searchInput");

    searchInput.focus();
    searchInput.value = ""; // Clear input before typing

    let index = 0;




    function typeCharacter() {
        if (index < courseTitle.length) {
            searchInput.value += courseTitle[index];

            // Dispatch an actual "input" event to mimic real typing
            searchInput.dispatchEvent(new InputEvent("input", { bubbles: true }));

            index++;
            setTimeout(typeCharacter, 20); // Adjust typing speed (100ms per character)
        } else {
      
        }
    }

    function simulateBackspace() {
        if (searchInput.value.length > 0) {
            searchInput.value = searchInput.value.slice(0, -1);

            // Dispatch InputEvent again to simulate real input change
            searchInput.dispatchEvent(new InputEvent("input", { bubbles: true }));

            setTimeout(simulateBackspace, 50); // Adjust backspace speed
        }
    }

    // Start typing first
    typeCharacter();
}
    }
};

    // Fetch Tags by IDs
    const fetchTags = async (tagIds) => {
      try {
        const tagsRef = db.collection("tags");
        const tagPromises = tagIds.map((tagId) => tagsRef.doc(tagId).get());
        const tagSnapshots = await Promise.all(tagPromises);
        return tagSnapshots.map((tagSnap) => tagSnap.data()?.name || "Unknown");
      } catch (error) {
        console.error("Error fetching tags:", error);
        return [];
      }
    };

    const fetchAllTags = async () => {
    try {
        const tagsSnapshot = await db.collection("tags").get();
        const tagsContainer = document.getElementById("tags-container");
        tagsContainer.innerHTML = ""; // Clear existing content

        // Create category title with improved styling
        const categoryTitle = document.createElement("h2");
        categoryTitle.textContent = "Filter by Tags";
        categoryTitle.className = "text-xl font-bold text-white mb-6 uppercase tracking-wide border-b border-gray-700 pb-3 flex items-center gap-2";
        categoryTitle.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
            </svg>
            Filter by Tags
        `;
        tagsContainer.appendChild(categoryTitle);

        // Wrapper for tags with improved spacing
        const tagsWrapper = document.createElement("div");
        tagsWrapper.className = "space-y-3";

        // Create "All" filter with improved styling
        const allTagLabel = document.createElement("label");
        allTagLabel.className = "flex items-center space-x-3 cursor-pointer p-4 rounded-xl transition-all duration-300 bg-gray-800 hover:bg-gray-700 shadow-md group";
        
        const allTagCheckboxWrapper = document.createElement("div");
        allTagCheckboxWrapper.className = "relative flex items-center justify-center";

        const allTagCheckbox = document.createElement("input");
        allTagCheckbox.type = "checkbox";
        allTagCheckbox.className = "tag-checkbox hidden";
        allTagCheckbox.checked = true;

        const allCustomCheckbox = document.createElement("div");
        allCustomCheckbox.className = "w-6 h-6 border-2 border-blue-500 rounded-lg flex items-center justify-center transition-all duration-200 ease-in-out bg-blue-500 group-hover:bg-blue-600";

        const allCheckmark = document.createElement("span");
        allCheckmark.className = "text-white text-lg";
        allCheckmark.innerHTML = "✓";

        allCustomCheckbox.appendChild(allCheckmark);
        allTagCheckboxWrapper.appendChild(allTagCheckbox);
        allTagCheckboxWrapper.appendChild(allCustomCheckbox);

        const allTagText = document.createElement("span");
        allTagText.className = "text-gray-300 font-medium text-base group-hover:text-white";
        allTagText.textContent = "All Tags";

        allTagLabel.appendChild(allTagCheckboxWrapper);
        allTagLabel.appendChild(allTagText);

        // Handle "All" filter selection
        allTagCheckbox.addEventListener("change", () => {
            if (allTagCheckbox.checked) {
                allCustomCheckbox.classList.add("bg-blue-500", "border-blue-500");
                allCheckmark.classList.remove("hidden");

                document.querySelectorAll(".tag-checkbox").forEach(tag => {
                    if (tag !== allTagCheckbox) {
                        tag.checked = false;
                        tag.dispatchEvent(new Event("change"));
                    }
                });

                renderCourses(null);
            }
        });

        allTagLabel.addEventListener("click", () => {
            allTagCheckbox.checked = true;
            allTagCheckbox.dispatchEvent(new Event("change"));
        });

        tagsWrapper.appendChild(allTagLabel);

        // Render tags with improved styling
        tagsSnapshot.forEach((doc) => {
            const tagId = doc.id;
            const tagName = doc.data().name;

            const tagLabel = document.createElement("label");
            tagLabel.className = "flex items-center space-x-3 cursor-pointer p-4 rounded-xl transition-all duration-300 bg-gray-800 hover:bg-gray-700 shadow-md group";
            
            const tagCheckboxWrapper = document.createElement("div");
            tagCheckboxWrapper.className = "relative flex items-center justify-center";

            const tagCheckbox = document.createElement("input");
            tagCheckbox.type = "checkbox";
            tagCheckbox.className = "tag-checkbox hidden";

            const customCheckbox = document.createElement("div");
            customCheckbox.className = "w-6 h-6 border-2 border-gray-500 rounded-lg flex items-center justify-center transition-all duration-200 ease-in-out group-hover:border-blue-500";

            const checkmark = document.createElement("span");
            checkmark.className = "hidden text-blue-500 text-lg";
            checkmark.innerHTML = "✓";

            tagCheckboxWrapper.appendChild(tagCheckbox);
            customCheckbox.appendChild(checkmark);
            tagCheckboxWrapper.appendChild(customCheckbox);

            const tagText = document.createElement("span");
            tagText.className = "text-gray-300 font-medium text-base group-hover:text-white";
            tagText.textContent = tagName;

            tagLabel.appendChild(tagCheckboxWrapper);
            tagLabel.appendChild(tagText);

            tagCheckbox.addEventListener("change", () => {
                if (tagCheckbox.checked) {
                    customCheckbox.classList.add("bg-blue-500", "border-blue-500");
                    checkmark.classList.remove("hidden");
                    checkmark.classList.add("text-white");

                    // Uncheck "All" when selecting any tag
                    allTagCheckbox.checked = false;
                    allCustomCheckbox.classList.remove("bg-blue-500", "border-blue-500");
                    allCheckmark.classList.add("hidden");
                } else {
                    customCheckbox.classList.remove("bg-blue-500", "border-blue-500");
                    checkmark.classList.add("hidden");
                }
                renderCourses(tagId);
            });

            tagLabel.addEventListener("click", () => {
                tagCheckbox.checked = !tagCheckbox.checked;
                tagCheckbox.dispatchEvent(new Event("change"));
            });

            tagsWrapper.appendChild(tagLabel);
        });

        tagsContainer.appendChild(tagsWrapper);

        // Create Clear Filter Button with improved styling
        const clearButton = document.createElement("button");
        clearButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Clear All Filters
        `;
        clearButton.className = "mt-6 flex items-center justify-center gap-2 px-5 py-3 text-blue-400 border border-blue-500 rounded-xl hover:bg-blue-500 hover:text-white transition-all duration-300 text-sm font-semibold w-full shadow-md hover:shadow-blue-500/20";
        
        clearButton.addEventListener("click", () => {
            document.querySelectorAll(".tag-checkbox").forEach(tag => {
                tag.checked = false;
                tag.dispatchEvent(new Event("change"));
            });

            allTagCheckbox.checked = true;
            allTagCheckbox.dispatchEvent(new Event("change"));
        });

        tagsContainer.appendChild(clearButton);
    } catch (error) {
        console.error("Error fetching tags:", error);
    }
};




//Get number of courses 

async function countUsersWithCourse(targetCourseId) {
  let count = 0;

  const usersSnapshot = await db.collection("users").get();

  for (const userDoc of usersSnapshot.docs) {
    const coursesSnapshot = await db
      .collection("users")
      .doc(userDoc.id)
      .collection("Courses")
      .get();

    const hasCourse = coursesSnapshot.docs.some(courseDoc => {
      return courseDoc.data().course_id === targetCourseId;
    });

    if (hasCourse) {
      count++;
    }
  }

  return count;
}


const fetchAllTags1 = async () => {
    try {
        const tagsSnapshot = await db.collection("tags").get();
        const tagsContainer = document.getElementById("tags-container1");
        tagsContainer.innerHTML = ""; // Clear existing content

        // Create category title with improved styling
        const categoryTitle = document.createElement("h2");
        categoryTitle.textContent = "Filter by Tags";
        categoryTitle.className = "text-xl font-bold text-white mb-6 uppercase tracking-wide border-b border-gray-700 pb-3 flex items-center gap-2";
        categoryTitle.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
            </svg>
            Filter by Tags
        `;
        tagsContainer.appendChild(categoryTitle);

        // Wrapper for tags with improved spacing
        const tagsWrapper = document.createElement("div");
        tagsWrapper.className = "space-y-3";

        // Create "All" filter with improved styling
        const allTagLabel = document.createElement("label");
        allTagLabel.className = "flex items-center space-x-3 cursor-pointer p-4 rounded-xl transition-all duration-300 bg-gray-800 hover:bg-gray-700 shadow-md group";
        
        const allTagCheckboxWrapper = document.createElement("div");
        allTagCheckboxWrapper.className = "relative flex items-center justify-center";

        const allTagCheckbox = document.createElement("input");
        allTagCheckbox.type = "checkbox";
        allTagCheckbox.className = "tag-checkbox hidden";
        allTagCheckbox.checked = true;

        const allCustomCheckbox = document.createElement("div");
        allCustomCheckbox.className = "w-6 h-6 border-2 border-blue-500 rounded-lg flex items-center justify-center transition-all duration-200 ease-in-out bg-blue-500 group-hover:bg-blue-600";

        const allCheckmark = document.createElement("span");
        allCheckmark.className = "text-white text-lg";
        allCheckmark.innerHTML = "✓";

        allCustomCheckbox.appendChild(allCheckmark);
        allTagCheckboxWrapper.appendChild(allTagCheckbox);
        allTagCheckboxWrapper.appendChild(allCustomCheckbox);

        const allTagText = document.createElement("span");
        allTagText.className = "text-gray-300 font-medium text-base group-hover:text-white";
        allTagText.textContent = "All Tags";

        allTagLabel.appendChild(allTagCheckboxWrapper);
        allTagLabel.appendChild(allTagText);

        // Handle "All" filter selection
        allTagCheckbox.addEventListener("change", () => {
            if (allTagCheckbox.checked) {
                allCustomCheckbox.classList.add("bg-blue-500", "border-blue-500");
                allCheckmark.classList.remove("hidden");

                document.querySelectorAll(".tag-checkbox").forEach(tag => {
                    if (tag !== allTagCheckbox) {
                        tag.checked = false;
                        tag.dispatchEvent(new Event("change"));
                    }
                });

                renderCourses(null);
            }
        });

        allTagLabel.addEventListener("click", () => {
            allTagCheckbox.checked = true;
            allTagCheckbox.dispatchEvent(new Event("change"));
        });

        tagsWrapper.appendChild(allTagLabel);

        // Render tags with improved styling
        tagsSnapshot.forEach((doc) => {
            const tagId = doc.id;
            const tagName = doc.data().name;

            const tagLabel = document.createElement("label");
            tagLabel.className = "flex items-center space-x-3 cursor-pointer p-4 rounded-xl transition-all duration-300 bg-gray-800 hover:bg-gray-700 shadow-md group";
            
            const tagCheckboxWrapper = document.createElement("div");
            tagCheckboxWrapper.className = "relative flex items-center justify-center";

            const tagCheckbox = document.createElement("input");
            tagCheckbox.type = "checkbox";
            tagCheckbox.className = "tag-checkbox hidden";

            const customCheckbox = document.createElement("div");
            customCheckbox.className = "w-6 h-6 border-2 border-gray-500 rounded-lg flex items-center justify-center transition-all duration-200 ease-in-out group-hover:border-blue-500";

            const checkmark = document.createElement("span");
            checkmark.className = "hidden text-blue-500 text-lg";
            checkmark.innerHTML = "✓";

            tagCheckboxWrapper.appendChild(tagCheckbox);
            customCheckbox.appendChild(checkmark);
            tagCheckboxWrapper.appendChild(customCheckbox);

            const tagText = document.createElement("span");
            tagText.className = "text-gray-300 font-medium text-base group-hover:text-white";
            tagText.textContent = tagName;

            tagLabel.appendChild(tagCheckboxWrapper);
            tagLabel.appendChild(tagText);

            tagCheckbox.addEventListener("change", () => {
                if (tagCheckbox.checked) {
                    customCheckbox.classList.add("bg-blue-500", "border-blue-500");
                    checkmark.classList.remove("hidden");
                    checkmark.classList.add("text-white");

                    // Uncheck "All" when selecting any tag
                    allTagCheckbox.checked = false;
                    allCustomCheckbox.classList.remove("bg-blue-500", "border-blue-500");
                    allCheckmark.classList.add("hidden");
                } else {
                    customCheckbox.classList.remove("bg-blue-500", "border-blue-500");
                    checkmark.classList.add("hidden");
                }
                renderCourses(tagId);
            });

            tagLabel.addEventListener("click", () => {
                tagCheckbox.checked = !tagCheckbox.checked;
                tagCheckbox.dispatchEvent(new Event("change"));
            });

            tagsWrapper.appendChild(tagLabel);
        });

        tagsContainer.appendChild(tagsWrapper);

        // Create Clear Filter Button with improved styling
        const clearButton = document.createElement("button");
        clearButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Clear All Filters
        `;
        clearButton.className = "mt-6 flex items-center justify-center gap-2 px-5 py-3 text-blue-400 border border-blue-500 rounded-xl hover:bg-blue-500 hover:text-white transition-all duration-300 text-sm font-semibold w-full shadow-md hover:shadow-blue-500/20";
        
        clearButton.addEventListener("click", () => {
            document.querySelectorAll(".tag-checkbox").forEach(tag => {
                tag.checked = false;
                tag.dispatchEvent(new Event("change"));
            });

            allTagCheckbox.checked = true;
            allTagCheckbox.dispatchEvent(new Event("change"));
        });

        tagsContainer.appendChild(clearButton);
    } catch (error) {
        console.error("Error fetching tags:", error);
    }
};


const style = document.createElement('style');
style.innerHTML = `
  
    .expandable-content {
        display: none;
    }
    .expandable-content.expanded {
        display: flex;
    }
`;

document.head.appendChild(style);


const renderCourses = async (tagId = null) => {
    const courseList = document.getElementById("course-list");
    const coursesPerPage = 9; // Number of courses per page
    let currentPage = 1;
    let allCourses = [];

    // Add pagination container
    const paginationContainer = document.createElement('div');
    paginationContainer.className = 'flex justify-center items-center gap-2 mt-8 mb-4';
    paginationContainer.id = 'pagination-container';
    
    // Function to update pagination controls
    const updatePagination = (totalPages) => {
        paginationContainer.innerHTML = '';
        
        // Previous button
        const prevButton = document.createElement('button');
        prevButton.className = 'px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed';
        prevButton.innerHTML = '&laquo; Previous';
        prevButton.disabled = currentPage === 1;
        prevButton.onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderPage();
            }
        };
        paginationContainer.appendChild(prevButton);

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('button');
            pageButton.className = `px-4 py-2 rounded-lg transition-colors ${
                currentPage === i 
                    ? 'bg-blue-500 text-white' 
                    : 'bg-gray-800 text-white hover:bg-blue-500'
            }`;
            pageButton.textContent = i;
            pageButton.onclick = () => {
                currentPage = i;
                renderPage();
            };
            paginationContainer.appendChild(pageButton);
        }

        // Next button
        const nextButton = document.createElement('button');
        nextButton.className = 'px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed';
        nextButton.innerHTML = 'Next &raquo;';
        nextButton.disabled = currentPage === totalPages;
        nextButton.onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderPage();
            }
        };
        paginationContainer.appendChild(nextButton);
    };

    // Function to render current page
    const renderPage = () => {
        const startIndex = (currentPage - 1) * coursesPerPage;
        const endIndex = startIndex + coursesPerPage;
        const coursesToShow = allCourses.slice(startIndex, endIndex);

        courseList.innerHTML = coursesToShow
        .map((course) => {
            const imageUrl = course.image_url || 'https://via.placeholder.com/400x200?text=No+Image';
            return `
                    <div class="group relative bg-gray-900 rounded-xl overflow-hidden border border-gray-700 hover:border-blue-500 transition-all duration-300 hover:shadow-2xl hover:shadow-blue-500/20 animate-fade-in">
                      <!-- Course Image with Overlay -->
                      <div class="relative h-48 overflow-hidden">
                        <img 
                          src="${imageUrl}" 
                          alt="${course.name}"
                          class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500 ease-out"
                          loading="lazy"
                          onerror="this.src='https://via.placeholder.com/400x200?text=No+Image'"
                        />
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900/90 via-gray-900/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        
                        <!-- Category Badge with Improved Visibility -->
                        <div class="absolute top-4 left-4 bg-blue-500/95 text-white px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm shadow-lg transform -translate-x-1 group-hover:translate-x-0 transition-all duration-300 course-category">
                          ${course.categoryName || "Uncategorized"}
                        </div>

                        <!-- Enhanced Favorite Button -->
                        <button 
                          onclick="addToFavorites(event, '${course.id}')"
                          aria-label="Add to favorites"
                          class="absolute top-4 right-4 p-3 bg-white/10 rounded-full backdrop-blur-sm hover:bg-white/20 transition-all duration-300 transform translate-x-1 group-hover:translate-x-0 hover:scale-110"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white transform group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                          </svg>
                        </button>

                        <!-- New: Course Duration Badge -->
                        <div class="absolute bottom-4 left-4 bg-black/60 text-white px-3 py-1 rounded-full text-xs backdrop-blur-sm flex items-center gap-1">
                          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                          ${course.meta?.duration || "Self-paced"}
                        </div>
                      </div>

                      <!-- Course Content with Enhanced Layout -->
                      <div class="p-6 space-y-4">
                        <!-- Rating with Animation -->
                        <div class="flex items-center gap-2">
                          <div class="flex gap-0.5">
                            ${Array(5).fill().map((_, i) => `
                              <svg xmlns="http://www.w3.org/2000/svg" 
                                class="w-4 h-4 text-yellow-500 transform group-hover:scale-110 transition-transform delay-${i*100}" 
                                viewBox="0 0 20 20" 
                                fill="currentColor"
                              >
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                              </svg>
                            `).join('')}
                          </div>
                          <span class="text-sm text-gray-400 group-hover:text-gray-300 transition-colors">
                            (${course.students || 0} students)
                          </span>
                        </div>

                        <!-- Course Title with Hover Effect -->
                        <h3 
                          onclick="showCourseDetails('${course.id}')"
                          class="text-xl font-semibold text-white group-hover:text-blue-400 transition-colors duration-300 cursor-pointer line-clamp-2 hover:line-clamp-none"
                          title="${course.name}"
                        >
                          ${course.name}
                        </h3>

                        <!-- Author Info with Enhanced Style -->
                        <div class="flex items-center gap-3 group/author">
                          <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center transform group-hover/author:scale-110 transition-transform">
                            <span class="text-white text-sm font-bold">${course.author.name.charAt(0)}</span>
                          </div>
                          <span class="text-sm text-gray-400 group-hover/author:text-white transition-colors">
                            by ${course.author.name}
                          </span>
                        </div>

                        <!-- Price and Action with Improved Layout -->
                        <div class="flex items-center justify-between pt-4 border-t border-gray-700">
                          <div class="flex items-center gap-2">
                            <span class="text-2xl font-bold ${course.pricee === '0' ? 'text-green-400' : 'text-white'} group-hover:scale-110 transition-transform">
                              ${course.pricee === "0" ? "Free" : `₵${course.pricee}`}
                            </span>
                          </div>
                          
                          <!-- Enhanced Add to Cart Button -->
                          <button 
                            class="add-to-cart-btn flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25"
                            data-id="${course.id}"
                            data-title="${course.name}"
                            data-price="${course.pricee === '0' ? '0' : course.pricee}"
                            data-image="${course.image_url || 'https://via.placeholder.com/150'}"
                            aria-label="Add ${course.name} to cart"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 transform group-hover:rotate-12 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <span>Add to Cart</span>
                          </button>
                        </div>
                      </div>
                    </div>
                `;
            })
            .join('');

        // Update pagination controls
        const totalPages = Math.ceil(allCourses.length / coursesPerPage);
        updatePagination(totalPages);

        // Add pagination container if it doesn't exist
        if (!document.getElementById('pagination-container')) {
            courseList.parentNode.insertBefore(paginationContainer, courseList.nextSibling);
        }
    };

    // Initial loading state
    courseList.innerHTML = `
        <div class="fixed top-0 right-0 left-0 bottom-0">
            <div class="text-center flex flex-col items-center justify-center w-screen h-screen">
                <p class="text-[#dbdbdb] text-lg font-semibold">Loading courses...</p>
  </div>
</div>
          `;

    try {
        allCourses = await fetchCourses(tagId);
        
        if (allCourses.length === 0) {
            courseList.innerHTML = "<p class='text-center text-gray-500'>No courses available.</p>";
            return;
        }

        document.getElementById("loadingScreen").classList.add("hidden");
        renderPage();
    } catch (error) {
        console.error("Error rendering courses:", error);
        courseList.innerHTML = "<p class='text-center text-red-500'>Error loading courses. Please try again later.</p>";
    }
};



      // Show Course Details in Modal
      const showCourseDetails = async ( courseId,) => {
       // Opens the course modal
 
      const coursesRef = db.collection("courses");
      const courseDoc = await coursesRef.doc(courseId).get();
      const course = courseDoc.data();

      
      const catid = course.cat_id
const cateRef = db.collection("categories");
  const cateDoc = await cateRef.doc(catid).get();
  const category  = cateDoc.data();
      // Fetch Tags

// Populate Modal
document.getElementById("modal1-id").innerText= courseId;
document.getElementById("model-students").innerText = course.students + " students" || "0 students";
document.getElementById("model-students1").innerText = course.students + " students" || "0 students"; // Updated line
document.getElementById("modal-image").src = course.image_url;
document.getElementById("modal-title").innerText = course.name;
document.getElementById("modal-description").innerHTML = course.meta?.description || "<p>No description available.</p>";
document.getElementById("modal-author").innerText = course.author?.name || "Unknown";
document.getElementById("modal-updated").innerText = formatTimestamp(course.updated_at);
document.getElementById("modal-video").innerText = course.video_url || "No video available";
document.getElementById("modal-language").innerText = course.meta?.language || "Unknown";
document.getElementById("modal-summary").innerText = course.meta?.summary || "No summary available";
document.getElementById("modal-id").innerText = course.author?.id || "Unknown";
document.getElementById("modal-duration").innerText = course.meta?.duration || "Unknown";
document.getElementById("modal-created").innerText = formatTimestamp(course.created_at);

updateShareLinks();
// Render lists
renderArrayAsList(course.meta?.requirements || [], "modal-requirements");
renderArrayAsList(course.meta?.learnings || [], "modal-learnings");

const modalCategory = document.getElementById("modal-category");
modalCategory.innerText = category.name || "Unknown";

modalCategory.className = "px-3 py-1 text-sm font-medium text-white bg-blue-500 rounded-full";

// Render capsule-styled tags
const tagContainer = document.getElementById("modal-tags");
tagContainer.innerHTML = ""; // Clear previous tags

 loadVideo(course.video_url);

// Ensure the video URL is valid

// Fetch Tags
const tags = course.tag_ids ? await fetchTags(course.tag_ids) : [];
const learning = course.learnings || [];
// Define an array of colors for tags
const tagColors = [
  "bg-blue-500", "bg-green-500", "bg-red-500", 
  "bg-yellow-500", "bg-purple-500", "bg-pink-500", 
  "bg-indigo-500", "bg-teal-500", "bg-orange-500"
];

if (tags.length > 0) {
  tags.forEach((tag, index) => {
    const tagElement = document.createElement("span");
    tagElement.textContent = tag;

    // Assign a color based on the index (loops through the colors array)
    const colorClass = tagColors[index % tagColors.length];

    tagElement.className = `px-3 py-1 text-sm font-medium text-white ${colorClass} rounded-full`;
    tagContainer.appendChild(tagElement);
  }

);
     // Show Modal
     document.getElementById("course-modal").style.display = "block";
document.getElementById("course-modal").scrollIntoView({ behavior: "smooth" });
} else {
  tagContainer.innerText = "None";
}

// Add Price to Modal
document.getElementById("modal-price").innerText = course.pricee === "0" ? "Free" : `₵${course.pricee}`;
// Get current date and add three months
const expireDate = new Date();
expireDate.setMonth(expireDate.getMonth() + 3);
const userid = auth.currentUser.uid;
const user = auth.currentUser;

// Add Enroll Button Link
document.getElementById("modal-enroll-button").addEventListener("click", async function () {
  if (course.pricee === "0") {
    document.getElementById("loadingScreen").classList.remove("hidden");
    try {
     // Update user's enrolled courses
// Add course to the Courses subcollection with expire_date
await db.collection("users").doc(userid).collection("Courses").doc(courseId).set({
  course_id: courseId,
  expire_date: firebase.firestore.Timestamp.fromDate(new Date(expireDate)), // Ensure expireDate is a valid Date object
});


  console.log("Course data successfully written!");
  showSuccessToast1();

  // Wait for 10 seconds before redirecting
  setTimeout(() => {
    window.location.href = "mycourse.html";
  }, 3000);
} catch (error) {
  console.error("Error writing document: ", error);
}finally {
  // Hide loading screen after process is done
  document.getElementById("loadingScreen").classList.add("hidden");
}

  } else {
    // Fetch user referral code
    const coursesRef1 = db.collection("users");
    const courseDoc1 = await coursesRef1.doc(userid).get();
    const course1 = courseDoc1.data();
    const refcode = course1.underef || '';

    // Generate query params
    const queryParams = new URLSearchParams({
      userid: userid,
      id: courseId,
      title: course.name,
      amount: course.pricee,
      description: course.meta?.description,
      image_url: course.image_url,
      referalcode: refcode,
    }).toString();

    window.location.href = `coursecart.html?${queryParams}`;
  }
});

function showSuccessToast1() {
  Toastify({
      text: "🎉 Enrolled Successfully",
      duration: 3000, // Auto close after 3 seconds
      close: true, // Show close button
      gravity: "top", // Position on top
      position: "right", // Align to the right
      backgroundColor: "linear-gradient(to right, #38a169, #2f855a)", // Green gradient
      stopOnFocus: true, // Stop dismissing on hover
  }).showToast();
}



    };

    document.addEventListener("DOMContentLoaded", () => {
      // Example: Set the author's name dynamically
      const authorElement = document.getElementById("modal-id");
      const clickElement = document.getElementById("modal-author");
      const authorName = authorElement.textContent.trim(); // Replace this with dynamic data if needed
      authorElement.textContent = authorName;

      // Add a click event listener
      clickElement.addEventListener("click", (event) => {
        event.preventDefault(); // Prevent default link behavior

        // Navigate to the author page
        window.location.href = `authorpages.html?name=${authorElement.textContent.trim()}`;
      });
    });

    // Close Modal
    document.getElementById("close-modal").addEventListener("click", () => {
      document.getElementById("course-modal").style.display = "none";
    });

    document.getElementById("searchInput").addEventListener("input", function () {
    let query = this.value.trim(); // Keep case sensitivity if needed
    let courses = document.querySelectorAll("#course-list > div");

    if (!query) {
        courses.forEach(course => course.style.display = "block");
        return;
    }

    let isCategoryOnly = false; // Flag to determine if input matches only a category

    // Check if the input is exactly a category name
    courses.forEach(course => {
        let categoryElement = course.querySelector(".course-category");
        let categoryName = categoryElement ? categoryElement.textContent.trim() : "";

        if (categoryName === query) {
            isCategoryOnly = true;
        }
    });

    courses.forEach(course => {
        let courseTitle = course.querySelector("h3").textContent.trim();
        let categoryElement = course.querySelector(".course-category");
        let categoryName = categoryElement ? categoryElement.textContent.trim() : "";

        let titleMatch = courseTitle.includes(query);
        let categoryMatch = categoryName === query; // Exact match

        if (isCategoryOnly) {
            // If input is exactly a category name, ignore title match
            course.style.display = categoryMatch ? "block" : "none";
        } else {
            // Otherwise, allow both title and category matching
            course.style.display = titleMatch || categoryMatch ? "block" : "none";
        }
    });
});





    // Initialize
    renderCourses();
</script>





   <script>
    document.getElementById("showFormButton").addEventListener("click", function () {
     window.location.href ='./account.html'
    });

  
   
  </script>
    <script>
      function showErrorToast() {
          Toastify({
              text: "🚨 Create an account to view courses!",
              duration: 3000,
              close: true,
              gravity: "top",
              position: "right",
              backgroundColor: "linear-gradient(to right, #e74c3c, #c0392b)", // Red error gradient
              stopOnFocus: true,
          }).showToast();
      }
  </script>

<script>
  const cart = [];

  const cartStates = {
    LOADING: 'loading',
    EMPTY: 'empty',
    HAS_ITEMS: 'has-items',
    ERROR: 'error'
  };

  function updateCartState(state, data = {}) {
    const cartContainer = document.getElementById("cart-items");
    const cartCount = document.getElementById("cart-count");
    const checkoutBtn = document.getElementById("checkout-btn");
    
    // Fade out current content
    cartContainer.style.opacity = '0';
    cartContainer.style.transform = 'translateY(-10px)';
    
    setTimeout(() => {
      switch (state) {
        case cartStates.LOADING:
          cartContainer.innerHTML = `
            <div class="flex items-center justify-center py-8">
              <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div>
            </div>
          `;
          checkoutBtn.disabled = true;
          checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed');
          break;
          
        case cartStates.EMPTY:
          cartContainer.innerHTML = `
            <div class="text-center py-8">
              <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
              </svg>
              <p class="text-gray-400 text-sm">Your cart is empty</p>
              <button onclick="window.location.href='#course-list'" class="mt-4 text-sm text-blue-500 hover:text-blue-400">
                Browse Courses
              </button>
            </div>
          `;
          cartCount.classList.add('hidden');
          checkoutBtn.disabled = true;
          checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed');
          break;
          
        case cartStates.HAS_ITEMS:
          cartContainer.innerHTML = '';
          data.items.forEach((item, index) => {
            const cartItem = renderCartItem(item, index);
            cartContainer.appendChild(cartItem);
          });
          cartCount.classList.remove('hidden');
          cartCount.textContent = data.items.length;
          checkoutBtn.disabled = false;
          checkoutBtn.classList.remove('opacity-50', 'cursor-not-allowed');
          break;
          
        case cartStates.ERROR:
          cartContainer.innerHTML = `
            <div class="text-center py-8">
              <svg class="mx-auto h-12 w-12 text-red-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <p class="text-red-500 text-sm">${data.message || 'Something went wrong'}</p>
              <button onclick="updateCartUI()" class="mt-4 text-sm text-blue-500 hover:text-blue-400">
                Try Again
              </button>
            </div>
          `;
          break;
      }
      
      // Fade in new content
      requestAnimationFrame(() => {
        cartContainer.style.opacity = '1';
        cartContainer.style.transform = 'translateY(0)';
      });
    }, 300);
  }

  function updateCartUI() {
    updateCartState(cartStates.LOADING);
    
    setTimeout(() => {
      try {
        if (cart.length === 0) {
          updateCartState(cartStates.EMPTY);
          document.getElementById("cart-total").textContent = "₵0.00";
          return;
        }
        
        let total = 0;
        cart.forEach(item => total += parseFloat(item.price));
        document.getElementById("cart-total").textContent = `₵${total.toFixed(2)}`;
        
        updateCartState(cartStates.HAS_ITEMS, { items: cart });
      } catch (error) {
        console.error('Error updating cart:', error);
        updateCartState(cartStates.ERROR, { 
          message: 'Could not update cart. Please try again.' 
        });
      }
    }, 500);
  }

  function renderCartItem(item, index) {
    const cartItem = document.createElement("div");
    cartItem.className = "flex items-center justify-between p-3 bg-gray-800 rounded-lg mb-2 border border-gray-700 hover:border-blue-500 transition-all duration-300";
    cartItem.innerHTML = `
      <div class="flex items-center gap-3">
        <img src="${item.image_url}" alt="${item.name}" class="w-12 h-12 rounded-lg object-cover">
        <div>
          <p class="text-white text-sm font-medium">${item.name}</p>
          <p class="text-green-400 text-xs">₵${item.price}</p>
        </div>
      </div>
      <button onclick="removeFromCart(${index})" class="text-gray-400 hover:text-red-500 transition-colors">
        <i class="fas fa-times"></i>
      </button>
    `;
    return cartItem;
  }

  function addToCart(event, courseName, coursePrice, courseId, courseDescription, courseImageUrl) {
    event.stopPropagation();

    // Create flying animation element
    const button = event.target.closest('.add-to-cart-btn');
    const buttonRect = button.getBoundingClientRect();
    const cartIcon = document.getElementById('open-cart');
    const cartRect = cartIcon.getBoundingClientRect();

    const flyingItem = document.createElement('div');
    flyingItem.className = 'fixed z-[60] w-12 h-12 rounded-lg shadow-lg pointer-events-none';
    flyingItem.style.cssText = `
      left: ${buttonRect.left}px;
      top: ${buttonRect.top}px;
      transform: scale(1);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      background-image: url(${courseImageUrl});
      background-size: cover;
      background-position: center;
    `;
    document.body.appendChild(flyingItem);

    // Trigger animation
    setTimeout(() => {
      flyingItem.style.cssText += `
        left: ${cartRect.left}px;
        top: ${cartRect.top}px;
        transform: scale(0.1);
        opacity: 0;
      `;
    }, 50);

    // Remove animation element and add to cart
    setTimeout(() => {
      flyingItem.remove();
      const userid = auth.currentUser.uid;
      cart.push({
        userid,
        id: courseId,
        name: courseName,
        price: parseFloat(coursePrice) || 0,
        description: courseDescription,
        image_url: courseImageUrl
      });
      
      // Show success feedback
      button.classList.add('bg-green-500');
      button.innerHTML = '<i class="fas fa-check"></i> Added to Cart';
      setTimeout(() => {
        button.classList.remove('bg-green-500');
        button.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
      }, 2000);

      updateCartUI();
      document.getElementById("cart-container").classList.remove("hidden");
    }, 600);
  }

  function removeFromCart(index) {
    const cartItemsContainer = document.getElementById("cart-items");
    const itemToRemove = cartItemsContainer.children[index];
    
    // Add removal animation
    itemToRemove.style.transition = 'all 0.3s ease-out';
    itemToRemove.style.transform = 'translateX(100%)';
    itemToRemove.style.opacity = '0';
    
    setTimeout(() => {
      cart.splice(index, 1);
      updateCartUI();
    }, 300);
  }

  document.getElementById("open-cart").addEventListener("click", () => {
    const cartContainer = document.getElementById("cart-container");
    cartContainer.classList.remove("hidden");
    // Add animation
    setTimeout(() => {
      cartContainer.classList.remove("scale-95", "opacity-0");
      cartContainer.classList.add("scale-100", "opacity-100");
    }, 50);
  });

  document.getElementById("close-cart").addEventListener("click", () => {
    const cartContainer = document.getElementById("cart-container");
    // Reverse animation
    cartContainer.classList.add("scale-95", "opacity-0");
    setTimeout(() => {
      cartContainer.classList.add("hidden");
    }, 300);
  });

  document.getElementById("checkout-btn").addEventListener("click", async () => {
    if (cart.length === 0) {
      alert("Your cart is empty!");
      return;
    }
    // Get current date and add three months
    const expireDate = new Date();
    expireDate.setMonth(expireDate.getMonth() + 3);
    // Get the current user
    const user = firebase.auth().currentUser;
    if (!user) {
      alert("Please log in to proceed to checkout.");
      return;
    }
    const userid = user.uid;

    // Fetch referral code from Firestore
    let refcode = "";
    try {
      const userDoc = await db.collection("users").doc(userid).get();
      if (userDoc.exists) {
        refcode = userDoc.data().underef || "";
      }
    } catch (error) {
      console.error("Error fetching referral code:", error);
    }

    // Check if all courses in cart are free
    const freeCourses = cart.filter(course => parseFloat(course.price) === 0);
    const paidCourses = cart.filter(course => parseFloat(course.price) > 0);

    if (freeCourses.length > 0 && paidCourses.length === 0) {
      // Enroll user in free courses
      try {
        document.getElementById("loadingScreen").classList.remove("hidden");

        for (const course of freeCourses) {
          // Update user's enrolled courses
          // Add course to the Courses subcollection with expire_date
          await db.collection("users").doc(userid).collection("Courses").doc(course.id).set({
            course_id: course.id,
            expire_date: firebase.firestore.Timestamp.fromDate(new Date(expireDate)), // Ensure expireDate is a valid Date object
          });

        }

        console.log("Free courses enrolled successfully!");
        showSuccessToast();

        // Redirect to "My Courses" after enrolling
        setTimeout(() => {
          window.location.href = "mycourse.html";
        }, 3000);
      } catch (error) {
        console.error("Error enrolling in free courses:", error);
      } finally {
        document.getElementById("loadingScreen").classList.add("hidden");
      }
    } else {
      // Use URLSearchParams for paid courses checkout
      const params = new URLSearchParams();
      params.append("userid", userid);
      params.append("referalcode", refcode);

      // Add only paid courses
      paidCourses.forEach((item) => {
        params.append("id", item.id);
        params.append("title", item.name);
        params.append("amount", item.price);
        params.append("description", item.description || "No description");
        params.append("image_url", item.image_url || "https://via.placeholder.com/150");
      });

      // Redirect to checkout page for paid courses
      window.location.href = `coursecart.html?${params.toString()}`;
    }
  });

  // Toast notification for successful enrollment
  function showSuccessToast() {
    Toastify({
      text: "🎉 Enrolled in free courses successfully!",
      duration: 3000,
      close: true,
      gravity: "top",
      position: "right",
      backgroundColor: "linear-gradient(to right, #38a169, #2f855a)",
      stopOnFocus: true,
    }).showToast();
  }

  document.addEventListener("click", (event) => {
    const button = event.target.closest(".add-to-cart-btn");

    if (button) {
      
      const courseId = button.dataset.id || "unknown";
      const courseName = button.dataset.title || "Unknown Course";
      const coursePrice = button.dataset.price || "0";
      const courseDescription = button.dataset.description || "No description";
      const courseImageUrl = button.dataset.image || "https://via.placeholder.com/150";

     
      addToCart(event, courseName, coursePrice, courseId, courseDescription, courseImageUrl);
    }
  });

</script>




<script>
  function updateShareLinks() {
    const title = document.getElementById("modal-title").innerText;
    const courseId = document.getElementById("modal1-id").innerText;
    const siteUrl = 'https://profstudymate.com' // Get the base site URL
    const storedUserId = localStorage.getItem("userId");
    const url = `${siteUrl}/courses.html?courseid=${courseId}&referral=${storedUserId}`;

    document.getElementById("share-facebook").href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
    document.getElementById("share-twitter").href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`;
    document.getElementById("share-linkedin").href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
    document.getElementById("share-whatsapp").href = `https://wa.me/?text=${encodeURIComponent(title + ' ' + url)}`;
  }


</script>


<script>
  document.getElementById("open-drawer").addEventListener("click", function() {
      document.getElementById("drawer").classList.remove("-translate-x-full");
  });
  document.getElementById("close-drawer").addEventListener("click", function() {
      document.getElementById("drawer").classList.add("-translate-x-full");
  });
</script>


<script>
// Wait for the page to load
// Ensure "Add to Cart" and "Enroll" buttons redirect only if the user is not logged in
document.addEventListener("DOMContentLoaded", function () {
  const urlParams = new URLSearchParams(window.location.search);
    const referral1 = urlParams.get("referral");

    if (referral1) {
        localStorage.setItem("referral", referral1);
       
    }
    firebase.auth().onAuthStateChanged((user) => {
        document.addEventListener("click", (event) => {
            if (event.target.closest(".add-to-cart-btn") || event.target.closest("#modal-enroll-button")) {
                if (!user) {
                    event.preventDefault();
                    window.location.href = "account.html"; // Redirect to login
                }
            }
        });
    });
});

const videoIframe = document.getElementById("modal-video");
const videoElement = document.getElementById("modal-video-player");

function loadVideo(videoUrl) {
    if (!videoUrl) {
        videoIframe.style.display = "none";
        videoElement.style.display = "none";
        return;
    }

  // Check if the video is a YouTube or Google Drive link
if (videoUrl.includes("youtube.com") || videoUrl.includes("youtu.be")) {
    // Convert YouTube watch link to embed link if needed
    if (videoUrl.includes("watch?v=")) {
        videoUrl = videoUrl.replace("watch?v=", "embed/");
    }

    // Show iframe for YouTube
    videoIframe.src = videoUrl;
    videoIframe.style.display = "block";
    videoElement.style.display = "none";

} else if (videoUrl.includes("drive.google.com")) {
    // Extract Google Drive File ID
    const driveRegex = /\/file\/d\/(.*?)\/view/;
    const match = videoUrl.match(driveRegex);

    if (match) {
        const fileId = match[1];
        videoUrl = `https://drive.google.com/file/d/${fileId}/preview`;

        // Show iframe for Google Drive video
        videoIframe.src = videoUrl;
        videoIframe.style.display = "block";
        videoElement.style.display = "none";
    }
} else {
    // Assume it's a Firebase Storage video (MP4, WebM, etc.)
    videoElement.src = videoUrl;
    videoElement.style.display = "block";
    videoIframe.style.display = "none";
}

}

// Example usage: Fetch video URL from Firebase and load it
fetchVideoFromFirebase();

async function fetchVideoFromFirebase() {
    // Simulating Firebase Firestore fetch
    const course = await getCourseFromFirebase(); // Assume this function fetches the video URL
    loadVideo(course.video_url);
}

// Dummy function simulating Firebase data retrieval
async function getCourseFromFirebase() {
    return {
        video_url: "https://firebasestorage.googleapis.com/v0/b/YOUR_PROJECT.appspot.com/o/sample.mp4?alt=media"
        // or "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
    };
}


  </script>

</body>
</html>